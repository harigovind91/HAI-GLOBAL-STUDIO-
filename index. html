<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <title>HAI PRO v3 Ultra - The Living AI Studio</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap');
        body { font-family: 'Google Sans', sans-serif; background: #000; color: white; overflow: hidden; }
        
        /* ‡§∏‡§ú‡•Ä‡§µ (Living) ‡§è‡§®‡§ø‡§Æ‡•á‡§∂‡§® */
        .living-glow { box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); animation: pulse 4s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .workspace-panel { transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); z-index: 300; }
        .workspace-open { transform: translateX(0); }
        .side-menu { transform: translateX(-100%); transition: transform 0.3s ease; z-index: 400; }
        .menu-open { transform: translateX(0); }
        
        .typing::after { content: '|'; animation: blink 0.7s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        
        .glass-header { background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(20px); border-bottom: 1px solid #222; }
        
        /* ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤‡§¨‡§æ‡§∞ ‡§õ‡•Å‡§™‡§æ‡§®‡§æ */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="flex h-screen w-screen bg-black">

    <aside id="sideMenu" class="side-menu fixed inset-y-0 left-0 w-80 bg-[#0a0c10] border-r border-gray-800 p-6 flex flex-col">
        <div class="flex justify-between items-center mb-8">
            <div class="text-3xl font-black text-blue-500 italic tracking-tighter">HAI PRO</div>
            <button onclick="toggleMenu()" class="material-icons text-gray-400">arrow_back</button>
        </div>
        <nav class="space-y-6 overflow-y-auto pr-2 flex-1">
            <p class="text-blue-500 font-bold text-[10px] uppercase tracking-widest mb-3 border-b border-gray-800 pb-1">AI Engine Modes</p>
            <div class="flex flex-col gap-1">
                <button onclick="setMode('Architectural')" class="w-full text-left p-3 hover:bg-gray-800 rounded-xl text-sm transition">üìê Architectural</button>
                <button onclick="setMode('Automobile')" class="w-full text-left p-3 hover:bg-gray-800 rounded-xl text-sm transition">üöó Automobile</button>
                <button onclick="setMode('Cloud Hosting')" class="w-full text-left p-3 hover:bg-gray-800 rounded-xl text-sm transition">üåê Cloud Hosting</button>
            </div>
        </nav>
        <button onclick="payNow()" class="w-full bg-blue-600 p-4 rounded-2xl font-bold shadow-lg text-xs uppercase active:scale-95 transition mt-auto">
            üöÄ Publish Now (‚Çπ820)
        </button>
    </aside>

    <section class="flex-1 flex flex-col h-full overflow-hidden border-r border-gray-900 relative">
        <header class="h-16 flex items-center justify-between px-6 glass-header z-50">
            <div class="flex items-center gap-3">
                <button onclick="toggleMenu()" class="material-icons text-gray-400">menu</button>
                <span class="font-bold tracking-tighter italic text-xl">HAI PRO <span class="text-blue-500 text-[10px] not-italic ml-1">V3 ULTRA</span></span>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 bg-green-900/20 px-3 py-1 rounded-full border border-green-800/30">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span class="text-[9px] font-bold text-green-400 uppercase">System Live</span>
                </div>
                <button onclick="openWorkspace()" class="material-icons text-gray-400">grid_view</button>
            </div>
        </header>

        <main id="chatBox" class="flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth">
            <div class="flex gap-4">
                <div class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center shrink-0 shadow-lg living-glow">
                    <span class="material-icons text-white">auto_awesome</span>
                </div>
                <div class="space-y-2">
                    <p class="text-blue-400 text-[10px] font-bold uppercase tracking-widest">HAI Hari AI</p>
                    <p class="text-gray-300 text-sm leading-relaxed typing">‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§Æ‡§æ‡§≤‡§ø‡§ï! ‡§Æ‡•à‡§Ç HAI ‡§π‡•Ç‡§Å‡•§ ‡§Ü‡§™‡§ï‡§æ ‡§™‡§∞‡•ç‡§∏‡§®‡§≤ ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§ï‡•ç‡§∞‡§ø‡§è‡§ü‡§ø‡§µ ‡§∏‡•ç‡§ü‡•Ç‡§°‡§ø‡§Ø‡•ã ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à‡•§ ‡§Ü‡§ú ‡§π‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§¨‡§®‡§æ‡§è‡§Ç‡§ó‡•á?</p>
                </div>
            </div>
        </main>

        <div class="p-4 bg-black/80 backdrop-blur-md">
            <div class="max-w-4xl mx-auto bg-[#111] border border-gray-800 rounded-[30px] flex items-center p-1.5 gap-2 focus-within:border-blue-500 transition-all shadow-2xl">
                <input id="userInput" type="text" class="flex-1 bg-transparent px-4 py-3 text-sm outline-none" placeholder="‡§Ö‡§™‡§®‡§æ ‡§ï‡§Æ‡§æ‡§Ç‡§° ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç (e.g. Design a hyper-car)...">
                <button onclick="sendMessage()" class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center shadow-lg active:scale-90 transition">
                    <span class="material-icons text-white">send</span>
                </button>
            </div>
        </div>
    </section>

    <div id="workspace" class="workspace-panel fixed inset-0 bg-[#050505] flex flex-col">
        <header class="h-16 flex items-center justify-between px-6 border-b border-gray-800 glass-header">
            <button onclick="closeWorkspace()" class="material-icons text-gray-400">arrow_back</button>
            <h2 class="text-xs font-bold uppercase tracking-widest text-blue-400">Advanced Engine Output</h2>
            <button onclick="payNow()" class="bg-blue-600 px-4 py-2 rounded-xl font-bold text-[10px] uppercase shadow-lg">üöÄ Publish (‚Çπ820)</button>
        </header>
        <div class="flex-1 p-6 overflow-y-auto" id="liveOutput">
            <div class="text-center mt-20 text-gray-600">
                <span class="material-icons text-5xl mb-4 block">analytics</span>
                ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§î‡§∞ ‡§°‡§ø‡§ú‡§æ‡§á‡§® ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§ó‡•Ä‡•§
            </div>
        </div>
    </div>

    <div id="paymentSuccess" class="hidden fixed inset-0 z-[500] bg-black/90 flex items-center justify-center p-6 backdrop-blur-xl">
        <div class="bg-[#111] border border-gray-800 p-8 rounded-[40px] text-center space-y-6 max-w-sm w-full">
            <div class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto shadow-lg shadow-green-500/20">
                <span class="material-icons text-white text-4xl">check</span>
            </div>
            <h2 class="text-2xl font-bold text-white">Project Published!</h2>
            <p class="text-gray-400 text-sm">‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡§¨‡•ç‡§≤‡§ø‡§∂ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§</p>
            <button onclick="downloadReceipt()" class="w-full bg-white text-black p-4 rounded-2xl font-bold text-xs flex items-center justify-center gap-2">
                <span class="material-icons text-sm">download</span> DOWNLOAD RECEIPT
            </button>
            <button onclick="location.reload()" class="text-blue-500 text-xs font-bold block mx-auto">BACK TO STUDIO</button>
        </div>
    </div>

    <script>
        let currentMode = "Global Intelligence";

        function toggleMenu() { document.getElementById('sideMenu').classList.toggle('menu-open'); }
        function openWorkspace() { document.getElementById('workspace').classList.add('workspace-open'); }
        function closeWorkspace() { document.getElementById('workspace').classList.remove('workspace-open'); }
        function setMode(m) { currentMode = m; toggleMenu(); alert("Engine Switch: " + m); }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const chat = document.getElementById('chatBox');
            const p = input.value;
            if(!p) return;

            // ‡§Ø‡•Ç‡§ú‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú
            chat.innerHTML += `<div class="flex justify-end mb-4"><div class="bg-blue-600/20 border border-blue-900/30 p-4 rounded-2xl text-sm max-w-[80%]">${p}</div></div>`;
            input.value = "";
            
            const tid = "ai_" + Date.now();
            chat.innerHTML += `<div id="${tid}" class="flex gap-2 items-center text-gray-500 text-xs italic"><span class="material-icons animate-spin text-[14px]">sync</span> HAI ‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•à...</div>`;
            chat.scrollTop = chat.scrollHeight;

            try {
                // ‡§Ø‡§π /chat_live ‡§Ü‡§™‡§ï‡•á api/index.py ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã‡§ó‡§æ
                const res = await fetch('/chat_live', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({category: currentMode, prompt: p})
                });
                const data = await res.json();
                document.getElementById(tid).remove();

                // AI ‡§∞‡§ø‡§∏‡•ç‡§™‡•â‡§®‡•ç‡§∏
                chat.innerHTML += `<div class="flex gap-4 mb-4"><div class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center shrink-0 shadow-lg"><span class="material-icons text-white">auto_awesome</span></div><div class="text-gray-300 text-sm leading-relaxed">${data.result}</div></div>`;
                
                // ‡§µ‡§∞‡•ç‡§ï‡§∏‡•ç‡§™‡•á‡§∏ ‡§Ö‡§™‡§°‡•á‡§ü
                document.getElementById('liveOutput').innerHTML = `<div class="p-6 bg-[#0a0a0a] rounded-3xl border border-gray-800 shadow-inner">${data.result}</div>`;
                
                setTimeout(openWorkspace, 800);
            } catch(e) {
                document.getElementById(tid).innerText = "‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§";
            }
            chat.scrollTop = chat.scrollHeight;
        }

        function payNow() {
            // ‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü UPI ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü (‚Çπ820)
            const upiLink = "upi://pay?pa=harigovindsingh91-2@okhdfcbank&pn=HAI%20Global%20Studio&am=820&cu=INR&tn=Project%20Publish%20Fee";
            window.location.href = upiLink;

            // ‡§∞‡§∏‡•Ä‡§¶ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è (‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•á ‡§¨‡§æ‡§¶)
            setTimeout(() => { 
                document.getElementById('paymentSuccess').classList.remove('hidden'); 
            }, 5000);
        }

        function downloadReceipt() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(20);
            doc.text("HAI PRO STUDIO - RECEIPT", 20, 30);
            doc.setFontSize(12);
            doc.text(`Date: ${new Date().toLocaleString()}`, 20, 50);
            doc.text("Service: AI Project Publishing", 20, 60);
            doc.text("Amount Paid: INR 820.00", 20, 70);
            doc.text("Status: SUCCESS", 20, 80);
            doc.text("Transaction ID: HAI" + Math.floor(Math.random() * 1000000), 20, 90);
            doc.save("HAI_PRO_Receipt.pdf");
        }
    </script>
</body>
  </html>
                  
